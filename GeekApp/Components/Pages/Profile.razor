@page "/profile"
@attribute [Authorize]
@using System.Security.Claims
@using Microsoft.AspNetCore.Authorization
@using Microsoft.AspNetCore.Components.Authorization
@inject AuthenticationStateProvider AuthStateProvider

<h1>Your Profile</h1>

@if (user != null)
{
    <div class="profile-card">
        <div class="profile-header">
            <h2>Welcome, @user.Identity?.Name!</h2>
        </div>
        <div class="profile-details">
            <p><strong>Email:</strong> @(user.FindFirst(ClaimTypes.Email)?.Value)</p>
            <p><strong>Registered since:</strong> @registrationDate.ToShortDateString()</p>
        </div>
    </div>
}

@code {
    private ClaimsPrincipal user;
    private DateTime registrationDate = DateTime.Now; // Replace with actual registration date from your DB

    protected override async Task OnInitializedAsync()
    {
        var authState = await AuthStateProvider.GetAuthenticationStateAsync();
        user = authState.User;
    }
}